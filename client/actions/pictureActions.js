import fetch from 'isomorphic-fetch';

//////////////////////
// picture actions //
/////////////////////

// Get album from db

// Post new profile picture to db

export const UPDATE_PIC = 'UPDATE_PIC';

export function updatePic(image_url, user_id) {
  console.log('updatePic called');
  console.log('IN UPDATE PIC', image_url);

  return function(dispatch) {

    dispatch(requestPic());

    let request = new Request(`/api/pictures/${user_id}`, {
      method: 'put',
      headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({image_url:  image_url})
    });

    return fetch(request)
      .then(response => response.json())
      .then((json) => {
        dispatch(receivePic(json));
      });
  };
}

export const GET_ALBUM = 'GET_ALBUM';

export function getAlbum(user_id) {
  console.log('got to getAlbum', user_id)
  return function(dispatch) {
    dispatch(requestAlbum());
    let request = new Request(`/api/album/${user_id}`, {
      method: 'get',
      headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
      },
    });

    return fetch(request)
      .then(response => response.json())
      .then((json) => {

        dispatch(receiveAlbum(json));
      });
  };
}

export function postPicture(user_id, image) {
  console.log('posting picture', image)

  //////////////imgur stuff///////////////////////
  // imgur.setClientId('a447505b4d4e019');
  // // imgur.setCredentials('email@domain.com', 'password', 'a447505b4d4e019');
  // imgur.uploadBase64(image)
  //     .then(function (json) {
  //         console.log(json.data.link);
  //     })
  //     .catch(function (err) {
  //         console.error(err.message);
  //     });
  ///////////////////////////////////////////////

  return (dispatch) => {
    //dispatch(postPic Action)
    let file = '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';
    
    fd = new FormData();
    fd.append('image', file);

    let request = new Request('https://api.imgur.com/3/upload', {
      method: 'post',
      headers: {
        'Authorization': 'Client-ID a447505b4d4e019'
      },
      data: {
        image: fd,
        // type: 'url',
        // key: 'bdf5e282d9a3835dadf37e72c76413f95ffdea1b'
      },
    });

    return fetch(request)
      .then(response => response.json())
      .then(json => {
        console.log(json);
      });
  };
}

///////////////////
// Network requests
///////////////////


// TARGET

export const REQUEST_PIC = 'REQUEST_PIC';
function requestPic() {
  return {
    type: REQUEST_PIC,
  };
}

export const RECEIVE_PIC = 'RECEIVE_PIC';
function receivePic(json) {
  return {
    type: RECEIVE_PIC,
    imageUrl: json,
    receivedAt: Date.now()
  };
}

export const REQUEST_ALBUM = 'REQUEST_ALBUM';
function requestAlbum() {
  return {
    type: REQUEST_ALBUM
  };
}

export const RECEIVE_ALBUM = 'RECEIVE_ALBUM';
function receiveAlbum(json) {
  return {
    type: RECEIVE_ALBUM,
    album: json,
    receivedAt: Date.now()
  };
}